<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Product Window UI</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Segoe UI', system-ui, sans-serif;
      background: radial-gradient(circle at 20% 20%, #ffb3b3, #7a1212 60%);
      color: #fff3f3;
      display: grid;
      place-items: center;
    }

    .window {
      width: 920px;
      max-width: calc(100% - 24px);
      background: linear-gradient(180deg, #5a0f0f, #8a1c1c);
      border-radius: 22px;
      box-shadow: 0 30px 80px rgba(122, 18, 18, .45),
                  inset 0 0 0 1px rgba(255,255,255,.18);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr;
    }

    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 18px;
      background: linear-gradient(90deg, #8a1c1c, #b22222);
      border-bottom: 1px solid rgba(255,255,255,.2);
    }

    .dots { display: flex; gap: 8px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: rgba(255,255,255,.7); }

    .title {
      font-weight: 800;
      letter-spacing: .5px;
    }

    .content {
      display: grid;
      grid-template-columns: 260px 1fr;
      min-height: 480px;
    }

    .left {
      padding: 22px;
      border-right: 1px solid rgba(255,255,255,.2);
      background: linear-gradient(180deg, #7a1212, #5a0f0f);
    }

    .brand {
      font-size: 20px;
      font-weight: 900;
      margin-bottom: 18px;
      letter-spacing: 1px;
    }

    .menu {
      display: grid;
      gap: 10px;
    }

    .menu div {
      padding: 12px 14px;
      border-radius: 12px;
      background: rgba(255,255,255,.12);
      cursor: pointer;
      transition: .2s;
    }

    .menu div:hover {
      background: rgba(255,255,255,.22);
      transform: translateX(6px);
    }

    .right {
      padding: 22px;
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 12px;
      background: linear-gradient(180deg, #8a1c1c, #6a1414);
    }

    .panel {
      background: #fff;
      color: #222;
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 15px 35px rgba(0,0,0,.25);
      display: grid;
      grid-template-rows: auto 1fr;
      gap: 12px;
    }

    .form {
      display: grid;
      grid-template-columns: 1.3fr 1fr auto;
      gap: 10px;
    }

    input {
      padding: 12px 14px;
      border-radius: 12px;
      border: 2px solid #eee;
      font-size: 14px;
    }

    input:focus {
      outline: none;
      border-color: #d64545;
      box-shadow: 0 0 0 3px rgba(214,69,69,.15);
    }

    .btn-add {
      background: linear-gradient(45deg, #7a1212, #d64545);
      color: #fff;
      border: none;
      border-radius: 12px;
      padding: 12px 18px;
      cursor: pointer;
      font-weight: 700;
      transition: .2s;
    }

    .btn-add:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px rgba(0,0,0,.2);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 10px;
      overflow: auto;
      padding-right: 6px;
    }

    .item {
      background: linear-gradient(135deg, #fff, #fff1f1);
      border-radius: 14px;
      padding: 12px;
      border: 1px solid #ffd6d6;
      display: grid;
      gap: 6px;
      transition: .2s;
    }

    .item:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 18px rgba(0,0,0,.18);
    }

    .name { font-weight: 800; color: #5a0f0f; }
    .price { color: #b22222; font-weight: 700; }

    .btn-del {
      justify-self: end;
      background: #ffecec;
      color: #b22222;
      border: 1px solid #ffc5c5;
      padding: 6px 12px;
      border-radius: 999px;
      cursor: pointer;
      font-size: 12px;
    }

    .btn-del:hover { background: #ffdada; }

    .empty {
      text-align: center;
      color: #777;
      padding: 30px 0;
    }

    .grid::-webkit-scrollbar { width: 6px; }
    .grid::-webkit-scrollbar-thumb {
      background: #d64545;
      border-radius: 10px;
    }
  </style>
</head>
<body>

<div class="window">
  <div class="top">
    <div class="dots">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
    <div class="title">Product Manager</div>
    <div></div>
  </div>

  <div class="content">
    <div class="left">
      <div class="brand">WORKSHOP</div>
      <div class="menu">
        <div>Products</div>
        <div>Analytics</div>
        <div>Users</div>
        <div>System</div>
      </div>
    </div>

    <div class="right">
      <div class="panel">
        <div class="form">
          <input id="name" type="text" placeholder="ชื่อสินค้า" />
          <input id="price" type="number" placeholder="ราคา" />
          <button class="btn-add" onclick="addProduct()">เพิ่มสินค้า</button>
        </div>

        <div class="grid" id="productList"></div>
      </div>
    </div>
  </div>
</div>

<script>
const API_URL = "http://localhost:8080/workshop_api/api/products.php";

function addProduct() {
  const name = document.getElementById("name").value.trim();
  const price = document.getElementById("price").value;

  if (!name || !price) return alert("กรุณากรอกข้อมูลให้ครบ");

  fetch(API_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ product_name: name, price })
  })
  .then(r => r.json())
  .then(d => {
    alert(d.message || "เพิ่มสำเร็จ");
    document.getElementById("name").value = "";
    document.getElementById("price").value = "";
    loadProducts();
  });
}

function deleteProduct(id) {
  if (!confirm("ต้องการลบสินค้านี้ใช่ไหม?")) return;

  fetch(API_URL, {
    method: "DELETE",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ id })
  })
  .then(r => r.json())
  .then(() => loadProducts());
}

function loadProducts() {
  fetch(API_URL)
    .then(r => r.json())
    .then(list => {
      const box = document.getElementById("productList");
      box.innerHTML = "";

      if (!list.length) {
        box.innerHTML = "<div class='empty'>ยังไม่มีสินค้า</div>";
        return;
      }

      list.forEach(p => {
        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div class="name">${p.product_name}</div>
          <div class="price">${Number(p.price).toLocaleString()} บาท</div>
          <button class="btn-del" onclick="deleteProduct(${p.id})">ลบ</button>
        `;
        box.appendChild(div);
      });
    });
}

loadProducts();
</script>

</body>
</html>
